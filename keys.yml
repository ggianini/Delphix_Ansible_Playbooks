---
- name: copying ssh key and updating sudoers
  hosts: 192.168.100.31
  vars_prompt:
  - name: target_os
    prompt: Qual o usuário no destino?
    private: false
  gather_facts: false
  remote_user: "{{ target_os }}"
  tasks:
    - name: copy key to remote hosts
      authorized_key:
        user: "{{ target_os }}"
        state: present
        key: "{{ lookup('file', '/home/ansible/.ssh/id_rsa.pub') }}"

# esse playbook extrai a chave pública localizada em '/home/ansible/.ssh/id_rsa.pub' e adiciona ao arquivo authorized_key do usuário 'delphix_os'
